{% extends 'main/layout.html' %}


{% block title%}Работа с базой данных{% endblock %}


{% block content%}
    <div class="features">
        <div class="top-befor-header">
            <h1>Таблица сопоставления артикулов</h1>
            {% if request.user.is_staff %}
            
            <div class="add-data">
                <form method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="label-button">
                        <button type="submit" name="compare" class="custom-button-delete-add">
                            Сопоставить
                        </button>
                        <button type="submit" name="excel_export" class="custom-button-choose">
                            Выгрузить в Excel
                        </button> 
                    </div>
                </form>
            </div>
            {% endif %}
        </div>
        <div class='filter-data'>
            <form action="" class="small-filter-form" method="POST">
                {% csrf_token %}
                <label for="common_article_id" class="rand">
                    <span>Артикул</span><br>
                    <input type="text" id="common_article_id" name="common_article" class="input-field">
                </label>
                <label for="status" class="rand">
                    <span>Статус</span><br>
                    <select id="status" name="status">
                        <option value="Сопоставлено">Сопоставлено</option>
                        <option value="Не сопоставлено">Не сопоставлено</option>
                    </select>
                </label>
                <div class="inner-form-data">
                    <br>
                    <input type="Submit" id="filter" name="filter" value="Фильтровать" />
                </div>
            </form>
        </div>
            <table style="overflow-x: scroll; display: block; width: 100%;">
                <tr>
                    <th>Артикул</th>
                    <th>Статус</th>
                    <th>Компания</th>

                    <th>WB арт пост</th>
                    <th>WB баркод</th>
                    <th>WB номенк</th>

                    <th>OZON арт пост</th>
                    <th>OZON баркод</th>
                    <th>OZON Product ID</th>
                    <th>OZON SKU</th>
                    <th>OZON FBO SKU ID</th>
                    <th>OZON FBS SKU ID</th>

                    <th>YANDEX арт пост</th>
                    <th>YANDEX баркод</th>
                    <th>YANDEX SKU</th>

                    <th>Кратность</th>
                </tr>
                {% for el in data %}   
                <tr>
                    <td><a href="{% url 'article_compare_detail' el.common_article %}">{{ el.common_article }}</a></td>
                    <td>{{ el.status }}</td>
                    <td>{{ el.company }}</td>

                    <td>{{ el.wb_seller_article }}</td>
                    <td>{{ el.wb_barcode }}</td>
                    <td>{{ el.wb_nomenclature }}</td>

                    <td>{{ el.ozon_seller_article }}</td>
                    <td>{{ el.ozon_barcode }}</td>
                    <td>{{ el.ozon_product_id }}</td>
                    <td>{{ el.ozon_sku }}</td>
                    <td>{{ el.ozon_fbo_sku_id }}</td>
                    <td>{{ el.ozon_fbs_sku_id }}</td>

                    <td>{{ el.yandex_seller_article }}</td>
                    <td>{{ el.yandex_barcode }}</td>
                    <td>{{ el.yandex_sku }}</td>

                    <td>{{ el.multiplicity }}</td>

                </tr>
                {% endfor %}
            </table>
    </div>    
        
{% endblock %}
